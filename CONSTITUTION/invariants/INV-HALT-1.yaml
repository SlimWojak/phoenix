# INV-HALT-1 — Local Halt Latency Invariant
# VERSION: 1.0
# STATUS: PROVEN

invariant:
  id: INV-HALT-1
  name: Local Halt Latency
  
  description: |
    request_halt() must complete in < 50ms.
    This is a HARD invariant — no IO, no logging, no propagation.
    The local halt flag must be set immediately.
    
  threshold:
    value: 50
    unit: milliseconds
    type: p99
    
  enforcement:
    type: timing
    mechanism: "Measured via time.perf_counter()"
    violation: "HaltLatencyViolation exception"
    
  tests:
    - test_file: tests/test_halt_latency.py
      description: "Measures request_halt() timing"
      criterion: "< 50ms"
      
  proven:
    sprint: S26
    value: 0.003
    unit: milliseconds
    evidence: "test_halt_latency.py p99 = 0.003ms"
    
  implementation:
    file: governance/halt.py
    method: HaltSignal.set()
    
  severity: CRITICAL
  violation_action: HALT
